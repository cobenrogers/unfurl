# Unfurl Environment Configuration
# =================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to git!
#
# SECURITY WARNING: Never commit this file with real values to version control!
# All sensitive values (passwords, secrets) must be kept secure.

# ============================================================================
# Database Configuration
# ============================================================================

# MySQL/MariaDB connection details
# Host: Usually 'localhost' for same-server database
DB_HOST=localhost

# Database name: Must exist before running the application
DB_NAME=unfurl_db

# Database credentials: Use a dedicated user with minimal permissions
# Required permissions: SELECT, INSERT, UPDATE, DELETE, CREATE, ALTER, INDEX
DB_USER=your_db_username
DB_PASS=your_db_password

# ============================================================================
# Application Settings
# ============================================================================

# Environment: 'production' or 'development'
# In production, errors are hidden from users and logged to files
APP_ENV=production

# Debug mode: 'true' or 'false'
# WARNING: NEVER enable debug in production! It exposes sensitive information.
APP_DEBUG=false

# Base URL: Full URL to your Unfurl installation (include trailing slash)
# Example: https://example.com/ or https://example.com/unfurl/
APP_BASE_URL=https://yoursite.com/unfurl/

# Timezone: PHP timezone identifier
# See: https://www.php.net/manual/en/timezones.php
# Examples: America/New_York, Europe/London, UTC, America/Los_Angeles
APP_TIMEZONE=America/New_York

# ============================================================================
# Security Configuration
# ============================================================================

# Session Secret: Used for CSRF token generation (REQUIRED)
# MUST be at least 32 characters for security
# Generate with: php -r "echo bin2hex(random_bytes(32));"
# Or: openssl rand -hex 32
SESSION_SECRET=generate_a_64_character_hex_string_here_using_the_command_above

# ============================================================================
# Processing Configuration
# ============================================================================

# Processing Timeout: Maximum seconds to wait for article fetching (default: 30)
PROCESSING_TIMEOUT=30

# Max Retries: Maximum number of retry attempts for failed articles (default: 3)
# Set to 0 to disable retries
PROCESSING_MAX_RETRIES=3

# Retry Delay: Base delay in seconds between retry attempts (default: 60)
# Uses exponential backoff: attempt 1 = 60s, attempt 2 = 120s, attempt 3 = 240s
PROCESSING_RETRY_DELAY=60

# ============================================================================
# Data Retention Policies
# ============================================================================

# Articles Retention: Days to keep articles before cleanup (default: 90)
# Set to 0 to keep articles forever
# Recommended: 90-180 days for most use cases
RETENTION_ARTICLES_DAYS=90

# Logs Retention: Days to keep log entries before cleanup (default: 30)
# Minimum: 7 days (enforced by application)
# Recommended: 30-60 days for troubleshooting history
RETENTION_LOGS_DAYS=30

# Auto Cleanup: Enable automatic cleanup via cron job ('true' or 'false')
# When enabled, old data is automatically deleted based on retention policies
# Requires cron job to be configured (see Settings page)
RETENTION_AUTO_CLEANUP=true

# ============================================================================
# Performance Settings (Optional)
# ============================================================================

# PHP Memory Limit: Maximum memory PHP can use (default: 256M)
# Increase if processing large numbers of articles simultaneously
# PHP_MEMORY_LIMIT=256M

# Maximum Execution Time: Maximum seconds a script can run (default: 30)
# Increase for batch operations or slow networks
# PHP_MAX_EXECUTION_TIME=30

# ============================================================================
# Monitoring & Health Checks (Optional)
# ============================================================================

# Health Check Secret: Optional secret for authenticated health checks
# Leave empty to allow public health check access
# HEALTH_CHECK_SECRET=

# Enable Metrics Collection: Track performance metrics ('true' or 'false')
# Metrics are stored in the metrics table for monitoring
# ENABLE_METRICS=true

# ============================================================================
# External Services (Future Use)
# ============================================================================

# Currently Unfurl doesn't require external API keys for core functionality
# Google News URL decoding uses their public batchexecute API
# Future features may require additional API keys (add here as needed)

# ============================================================================
# Notes
# ============================================================================
#
# PRODUCTION DEPLOYMENT CHECKLIST:
# 1. Set APP_ENV=production and APP_DEBUG=false
# 2. Generate secure SESSION_SECRET (64 character hex)
# 3. Use strong database password
# 4. Configure correct APP_BASE_URL
# 5. Set appropriate retention policies
# 6. Configure HTTPS and enable HSTS in .htaccess
# 7. Set up cron jobs (see Settings page for commands)
# 8. Verify file permissions (storage/ must be writable)
# 9. Run database migrations
# 10. Test health check endpoint: /health.php
#
# BACKUP RECOMMENDATIONS:
# - Daily automated database backups
# - Weekly full application backups
# - Keep backups for at least 30 days
# - Test restore procedure regularly
#
# MONITORING:
# - Monitor health check endpoint regularly
# - Set up alerts for failed API calls
# - Review error logs daily
# - Check retry queue for stuck items
#
# For more information, see:
# - README.md - General documentation
# - CLAUDE.md - Development patterns and decisions
# - docs/PRODUCTION-CHECKLIST.md - Full deployment guide
